<!--
    This source file is part of the open source project
    ExpressionEngine User Guide (https://github.com/ExpressionEngine/ExpressionEngine-User-Guide)

    @link      https://expressionengine.com/
    @copyright Copyright (c) 2003-2021, Packet Tide, LLC (https://packettide.com)
    @license   https://expressionengine.com/license Licensed under Apache License, Version 2.0
-->

# Multi-Factor Authentication

Multi-factor authentication adds an extra level of protection to the Control Panel by relying on one-time password generated by Multi-factor authentication applications like Google Authenticator, Microsoft Authenticator or Authy.

## Enabling MFA 

### Enabling MFA In The Control Panel

With ExpressionEngine Pro installed, users with Control Panel access can enable/disable Multi-factor authentication via their profile in the Control Panel. 

![MFA CP Setup](/_images/2fa-cp-setup.png)

### Enable MFA on front-end

Multi-Factor Authentication on the front-end is handled using a set of system dialogs. These dialogs can be triggered manually using the links provided by the [`{exp:member:mfa_links}` tag](member/mfa.md).

The dialogs are presented using `Multi-Factor Authentication Template` from System Message Templates. You can also use a custom template from the [`system_messages` template group](/control-panel/template-manager.md#custom-system-messages), it should be named `mfa`.

## Control Panel protection

While setting up Multi-factor authentication (2FA) is optional for Control Panel users, it can be set as required to access the Control Panel for certain members.

![MFA CP Toggle](/_images/2fa-cp-toggle.png)

With this setting turned on, the members will be presented the dialog to enter one-time password when they log in to CP. They will not be able to access any of CP pages (except the "Multi-Factor Authentication" section of their profile) without authentication - they still will be able to access the site however.

If the member has not yet set up their multi-factor authentication, upon login to Control Panel they will be redirected to page in their profile where they can scan QR code using their MFA app and then enter the provided one-time password (OTP) to complete the setup.

## Resetting MFA

In case when the device that was used to scan QR code for MFA is not available, it is possible to reset multi-factor authentication using the backup code that has been provided together with the QR code. 

## Disabling MFA

MFA can be disabled after the member has logged in and completed second-factor authentication. As additional protection measure, the password is being asked.
